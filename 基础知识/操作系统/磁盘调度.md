## 文件系统

### 磁盘调度

当有多个访盘请求等待时，采用一定的策略，对这些请求得服务顺序调整安排。从而降低平均磁盘服务时间，达到公平（一个I/O请求在有限时间内满足）、高效（减少设备机械运动带来的时间开销）。

一次访盘时间=寻道时间+旋转延迟时间+传输时间

* 减少寻道时间
* 减少延迟时间

#### 先来先服务算法（FCFS）

按访问请求到达的先后次序服务

* 优点：简单公平
* 缺点：效率不高，相邻两次请求可能会造成最内到最外的柱面寻道，使磁头反复移动，增加了服务时间，对机械也不利

以磁盘访问序列（98,183,37,122,14,124,65,67）读写头起始位置为53，则需要640磁道，平均为80

#### 最短寻道时间优先（Shortest Seek Time First）

优先选择距当前磁头最近的访问请求进行服务，主要考虑寻道优先

* 优点：改善了磁盘平均服务时间
* 缺点：造成某些访问请求长期等待得不到服务

以磁盘访问序列（98,183,37,122,14,124,65,67）读写头起始位置为53，则需要236磁道，平均为29.5

#### 扫描算法SCAN（电梯算法）

当设备无访问请求时，磁头不动，当有访问请求时，磁头按一个方向移动，在移动过程中对遇到的访问请求进行服务，然后判断该方向上是否还有访问请求，如果有则继续扫描；否则改变移动方向，并为经过的访问请求服务，如此反复。**折中权衡距离与方向**

以磁盘访问序列（98,183,37,122,14,124,65,67）读写头起始位置为53，则需要218磁道，平均为27.25；53->37->14->65->67->98->122->124->183

##### 单向扫描调度算法C-SCAN

减少了新请求的最大延迟

* 总是从0号柱面开始向里扫描
* 按柱面（磁道）位置选择访问者
* 移动臂到达最后一个柱面后，立即带动读写磁头快速返回0号柱面
* 返回时不为任何的等待访问者服务
* 返回后可再次进行扫描

##### N-step-scan 

克服磁头臂的粘性

* 把磁盘请求队列分成长度为N的子队列，每一次用SCAN处理一个子队列
* 在处理某一个队列时，新请求添加到其他子队列中
* 如果最后剩下的请求书小于N，则它们全部都将在下一次扫描时处理
* N值比较大时，其性能接近SCAN；当N=1时，即FIFO

##### FSCAN策略

1. 使用两个子队列
2. 扫描开始时，所有请求都在一个队列中，而另一个队列为空
3. 扫描过程中，所有新到的请求都放入另一个队列中
4. 对新请求的服务延迟到处理完所有老请求之后

#### 旋转调度算法

根据延迟时间来决定执行次序的调度。

分为三种情况

* 若干等待访问者请求访问同一磁头上的不同扇区
* 若干等待访问者请求访问不同磁头上的不同编号的扇区
* 若干等待访问者请求访问不同磁头上具有相同的扇区

对于前两种情况：总是让首先到达读写磁头位置下的扇区进行传送操作

对于第三种情况：这些扇区同时到达读写磁头位置下，可任意选择一个读写磁头进行传送操作